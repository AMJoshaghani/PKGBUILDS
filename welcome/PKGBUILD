# Maintainer: EndeavourOS-Team <info@endeavouros.com>

pkgname=welcome
pkgdesc="Welcome greeter for new EndeavourOS users."
pkgver=1.12
pkgrel=2
arch=('any')
license=('GPL')
depends=(
  bash yad reflector systemd
  whois geoip bind-tools         # for reflector-simple
)

url="https://github.com/endeavouros-team/PKGBUILDS/raw/master/$pkgname"

source=(
  $url/$pkgname
  $url/$pkgname.desktop
  $url/eos-script-lib-yad
  $url/reflector-simple
)
sha512sums=('8362798b41790e8b4705f36260c98c301422b56ee33fecef847a689126ca206acccb666a58563b321400590b1de86cb618c804c300c512841ffbba8ecc9f2eb2'
            '87a44d71b2d084aad1f9f3b66481c4cb54de147231fa0f10674e8d62904e5ec4bc096d077501794d0ea73db36f45122a84fb1f7233d260f0e4d4a37a2f85bb85'
            '0263e001047fab9cfdf16be68cb69fea938070495b0b0b5cf5eab286a7087ec1eb3ce48abed62e70886325eeea69e3b751320e9c355f1c3cd54ab71747bfdf7e'
            'aa3fed032d3ce540cb81b035d9ce6220829f0ef3dac002a294ed2775607bf2f92b895ac50e7e7ec7f6ac5417885b75a1905ba9a9a0d7ce3cca5ed96feb8c1696')

package() {
  cd $srcdir

  install -d $pkgdir/usr/share/endeavouros/scripts
  install -Dm755 $pkgname            $pkgdir/usr/share/endeavouros/scripts/$pkgname
  install -Dm644 eos-script-lib-yad  $pkgdir/usr/share/endeavouros/scripts/eos-script-lib-yad
  install -Dm644 $pkgname.desktop    $pkgdir/etc/xdg/autostart/$pkgname.desktop

  install -d $pkgdir/usr/bin
  ln -s /usr/share/endeavouros/scripts/$pkgname $pkgdir/usr/bin/eos-$pkgname
  install -Dm755 reflector-simple               $pkgdir/usr/bin/reflector-simple
}
