# Maintainer: EndeavourOS-Team <info@endeavouros.com>

pkgname=reflector-simple
pkgdesc="Simple GUI wrapper for 'reflector'."
pkgver=1.15.3
pkgrel=2
arch=('any')
license=('GPL')
depends=(
  reflector whois geoip bind-tools
  eos-bash-shared
)
optdepends=(
  'reflector-bash-completion: useful for plain reflector usage'
)
backup=(etc/$pkgname.conf)

#url=https://github.com/endeavouros-team/PKGBUILDS
url=https://github.com/endeavouros-team/PKGBUILDS/tree/master/$pkgname
_url="https://raw.githubusercontent.com/endeavouros-team/PKGBUILDS/master/$pkgname"

source=(
  $_url/$pkgname
  $_url/$pkgname.desktop
  $_url/$pkgname.conf
  $_url/mirrorlist-rank-info
)
sha512sums=('70f6f11a54a32bdbb4959a9b19f43d8afa5c5f8c2e346590f3ff56253c156323657e3a2aed067978ac237ddc125b725770b7eeacc350b9e70fa4d6de86f21588'
            'bed925140e7ff3e7093b8ac150e7aa8bcd398e0a72a9ec1ef412046d3ff01e0a817ada097f76595ffb5daef5980c1df4530ac534dac0f2f23d831984b888a196'
            '8c581124dc0a2d4b3b15a44f736d9f25643b172bf0f16a40a8b8846cfb6648409adea0b71a8e4c8537c3482f6dd26ee359d19c75754edd6580285914cd750bfd'
            'a32dbd88f336e07852e494efa47d2488c4f505f00e4ccfb8a298cf30b20cdf104af8da98e611dcce42b26886989d80ec87c71317a65c53501ac369525bdd69a8')

package() {
  cd $srcdir

  sed -i $pkgname -e "s|local VERSION_INFO=.*$|local VERSION_INFO=${pkgver}-$pkgrel|"

  install -d $pkgdir/usr/bin
  install -d $pkgdir/etc
  install -d $pkgdir/usr/share/applications

  install -Dm755 $pkgname              $pkgdir/usr/bin/$pkgname
  install -Dm755 mirrorlist-rank-info  $pkgdir/usr/bin/mirrorlist-rank-info
  
  install -Dm644 $pkgname.conf    $pkgdir/etc/$pkgname.conf
  install -Dm644 $pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop
}
