# Maintainer: EndeavourOS-Team <info@endeavouros.com>

pkgname=eos-update-notifier
pkgdesc="Software update notifier and 'news for you' for EndeavourOS users."
pkgver=1.10.1
pkgrel=2
arch=('any')
license=('GPL')
depends=(bash eos-bash-shared pacman-contrib wget xdg-utils yad yay)
optdepends=('paru: can be configured as the AUR helper')
backup=(etc/$pkgname.conf)

url=https://github.com/endeavouros-team/PKGBUILDS
_url="https://raw.githubusercontent.com/endeavouros-team/PKGBUILDS/master/$pkgname"

source=(
  $_url/$pkgname
  $_url/$pkgname.completion
  $_url/$pkgname.conf
  $_url/arch-news-for-you
  $_url/eos-arch-news
  $_url/$pkgname.desktop
  $_url/$pkgname.timer
  $_url/$pkgname.service
  $_url/checkupdatesext
)
sha512sums=('39bb6acb25553a7e4c080fcd84545453570654836cb17030bbfb50c12400c509a87dbd88bb7fac1988f3d3aaad4e28d20cce501bd7e6f08a2df49bf82c08fa27'
            'd5d4d92a9fd0d7a4425bb7000d208d717846ff30c2c31abac94c88840d3e8edc4862a6aacbb576330ff9d7644e63cf90e509caad629d9ed516f378e62b26e168'
            '258cfb39c54ccb7fab98e56583e185b2d8c1cfb2ae43346bc0c99b86477ed831aae0b9ac21ef8c76cacd55e750fda120c560d36f263d3700c96ee3758933b608'
            '46b8363fc32276fbba0fc98ec95076b6db190622e9feca281e4d05f85b2249a4653c1e7d6779a96bb242f2fa30016d61b8b5f76ac0beb032041ce39fe70f874f'
            'c7f0d38a1a67164bd14c76c672467c6fe962558f06c6e4f14763a39cbf5b975380d2a5fb0b44a4bfdbffb4a8c61d98f7c62b7a15c3539aa706e7b4c710db840b'
            'd0a67db74a020f94f72cca002b7b37c11d4dbe5a703c2259f804a53d00a361b94120c7bcc77d2532dd19ba40c5c89aacb489f05ec2734b570ad5c0c2988a3cba'
            '47dc0b096cebee56e056c6c6996268b5495b70e027922abfcf2b5d003d2988f2cc80a63c00fae893eb916cfe28623795bd2264ddd212b0faf576179ea9ab3a35'
            '0bdcd09c69e1fb9d7e28a9155e90c6c632c506d619685b8a8a417dd737d240a96cce77b3231a4644e9f79de9e7b3a0048d299476ad0c78076528c5389641af31'
            '74903e0d815f888c480e515fffd8966b8641f47b28a76c4f4ff58067ec39310278bb8b6a193f82ca1a09271c65c216623d1421da86495111710ff813adedd27b')

package() {
  cd $srcdir

  install -Dm755 $pkgname                  $pkgdir/usr/bin/$pkgname
  install -Dm644 $pkgname.conf             $pkgdir/etc/$pkgname.conf
  install -Dm644 $pkgname.desktop          $pkgdir/etc/xdg/autostart/$pkgname.desktop    # not needed because of systemd service
  install -Dm755 arch-news-for-you         $pkgdir/usr/bin/arch-news-for-you
  install -Dm755 eos-arch-news             $pkgdir/usr/bin/eos-arch-news
  install -Dm755 checkupdatesext           $pkgdir/usr/bin/checkupdatesext

  install -d $pkgdir/usr/share/bash-completion/completions
  install -Dm644 $pkgname.completion $pkgdir/usr/share/bash-completion/completions/$pkgname
}
