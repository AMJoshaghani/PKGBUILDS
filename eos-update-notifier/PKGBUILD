# Maintainer: EndeavourOS-Team <info@endeavouros.com>

pkgname=eos-update-notifier
pkgdesc="Software update notifier and 'news for you' for EndeavourOS users."
pkgver=0.7
pkgrel=1
arch=('any')
license=('GPL')
depends=(bash yad welcome xdg-utils wget pacman-contrib yay)
url="https://github.com/endeavouros-team/PKGBUILDS/raw/master/$pkgname"
backup=(etc/$pkgname.conf)

source=(
  $url/$pkgname
  $url/$pkgname.conf
  $url/arch-news-for-you
  $url/eos-reboot-required
  $url/eos-reboot-required.hook
  $url/$pkgname.desktop
  $url/$pkgname.timer
  $url/$pkgname.service
)
sha512sums=('1e616ca45e8b605d56fb989686e0f363bdd5a71e18936cb74f6fdce72f7417ac0b8ff327c5f046b7e194c14b54a9b94b8e84b74f843dbbea039bab14ff7e8288'
            'a091a033b5e6b6a383290dd6e6e4e038deb40cf2f2fb2072be71f34f4c4c661b6256b7c4799b3be3fb43c5f982e3311126f4e29c0b84ecfc556dc0b1a252e55b'
            '97eed94588efa2fb0a824a92c2efaa484612033717795d1c0c7e72a7fe1352cc7b44c14c0f82748e1bbd00983d3ae5bc0ab8ca523db75b46c2a5002e5645fb2e'
            '9fa874a0a01ae488b1a47abaadf4af803370b09e322e544fb989bb9b45029bab272481355f6aa3c77625a05aeb59f729f79c3de22c4bd5a06721e9f6df1f94ff'
            'f837dfdde4a9f6a09790ee87454caa35658281e7308ecad57f0916048c40392237aa5ba6698d050bf21f722f883a999a0bf2651aa6fae9b21b3260046936f2f6'
            '603a9c1a9d903b15f126cf56c79f974a577b06f62e6036caf523b8883df74ae017b5cd37c673299e220989f3e78824980b4b3f30b24037d37ab6523c0b91047a'
            'e8de7b750624fb3b72f2128ac6e31a2cacd3bfc25cd71868789a5962986ca2a98e17fb42d8e3ebb7c791780935d79a388bd929525d065e1673b0ddaa67e8c512'
            '0bdcd09c69e1fb9d7e28a9155e90c6c632c506d619685b8a8a417dd737d240a96cce77b3231a4644e9f79de9e7b3a0048d299476ad0c78076528c5389641af31')

package() {
  cd $srcdir

  install -Dm755 $pkgname                  $pkgdir/usr/bin/$pkgname
  install -Dm644 $pkgname.conf             $pkgdir/etc/$pkgname.conf
  install -Dm644 $pkgname.desktop          $pkgdir/etc/xdg/autostart/$pkgname.desktop
  install -Dm755 arch-news-for-you         $pkgdir/usr/bin/arch-news-for-you

  install -d $pkgdir/etc/pacman.d/hooks
  install -Dm644 eos-reboot-required.hook  $pkgdir/etc/pacman.d/hooks/eos-reboot-required.hook
  install -Dm755 eos-reboot-required       $pkgdir/usr/bin/eos-reboot-required
}
