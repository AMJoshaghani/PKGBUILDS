#!/bin/bash

echo2() { echo "$@" >&2 ; }
msg()   { echo2 "==>" "$@" ; }

Main() {
    local conf=/etc/eos-rankmirrors.conf
    source $conf || return

    local timeout="$EOS_AUTORANK_TIMEOUT"
    [ -n "$timeout" ] || timeout=30

    if [ "$EOS_AUTO_MIRROR_RANKING" = "yes" ] ; then
        eos-rankmirrors --timeout $timeout >/dev/null
    else
        msg "Configured in $conf not to rank mirrors."
    fi
}

Main "$@"
