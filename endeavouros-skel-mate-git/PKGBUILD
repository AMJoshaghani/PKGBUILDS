# Maintainer: EndeavourOS <info@endeavouros.com>
# Contributor: joekamprad <joekamprad@endeavouros.com>

_pkgname=endeavouros-DE-fixes
pkgname=endeavouros-skel-mate-git
pkgver=51.a9e5fff
pkgrel=1
pkgdesc="pre user creation skel setup to fix mate install"
arch=('any')
url="https://github.com/endeavouros-team/${_pkgname}"
license=('GPL')
source=("${_pkgname}::git+https://github.com/endeavouros-team/${_pkgname}.git#branch=main")
sha256sums=('SKIP')

pkgver() {
  cd "$_pkgname"
  printf "%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package() {
    PREFIX=/etc/skel
    cd "$_pkgname"
    mkdir -p "${pkgdir}${PREFIX}/.config/autostart"
    install -Dm755 "mate/set_once_mate.sh" "${pkgdir}${PREFIX}/"
    install -Dm755 "mate/set_once_mate.desktop" "${pkgdir}${PREFIX}/.config/autostart/"
}
