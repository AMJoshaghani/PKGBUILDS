# Maintainer: EndeavourOS <info@endeavouros.com>, killajoe <archlinux@kamprad.net>
# EndeavourOS specific branding and configuration for calamares

pkgname=calamares_config_next
pkgver=1.1
pkgrel=1
pkgdesc='EndeavourOS calamares configuration files and branding'
arch=('any')
url='https://www.endeavouros.com'
license=('GPL3')
source=('git+https://github.com/endeavouros-team/calamares_config_next.git')
sha512sums=('SKIP')

prepare() {
 # set date for calamares_branding
    _date=$(date +%Y.%m.%d)
    sed -i $srcdir/calamares_config_next/calamares/branding/endeavouros/branding.desc \
    -e "s|^\(    version:[ ]*\).*$|\1$_date|" \
    -e "s|^\(    shortVersion:[ ]*\).*$|\1$_date|"
}

package() {
    install -dm 755 $pkgdir/etc/calamares
    cp -r --no-preserve=ownership $srcdir/calamares_config_next/calamares $pkgdir/etc/
}
